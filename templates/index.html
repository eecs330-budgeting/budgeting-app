<!DOCTYPE html>

<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static',filename='styles/index.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static',filename='styles/warning.css') }}" />
      <title>BudgetForNow</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="#">BudgetForNow</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="{{ url_for('form') }}"
              >Home <span class="sr-only">(current)</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Budget</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Report</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('account') }}">Account</a>
          </li>
        </ul>
      </div>
    </nav>
    <div id="wrapper">
      <div class="container home-section">
        <div class="row">
          <div class="col-md-4">
            <div class="budget-card-view">
              <header class="card-header transparent">Balance</header>
              <div class="card-content" id="account-balance">
                <ul>
                  <li class="card-balance">
                    <div class="balance-header">
                      <h3>
                        <div>
                          <span class="icon"
                            ><i class="far fa-money-bill-alt"></i
                          ></span>
                          <span>Cash</span>
                        </div>
                        <span class="balance-amount">$ 270</span>
                      </h3>
                    </div>
                  </li>
                  <li class="card-balance">
                    <div class="balance-header">
                      <h3>
                        <div>
                          <span><i class="fas fa-piggy-bank"></i></span>
                          <span>Saving Cards</span>
                        </div>
                        <span class="balance-amount">$ 270</span>
                      </h3>
                    </div>
                    <ul class="bank-list">
                      <li>
                        <h4>
                          <span>CHASE COLLEGE</span>
                          <span>$ 200</span>
                        </h4>
                        <h6>
                          <span class="nickname">Chase Bank</span>
                        </h6>
                      </li>
                      <li>
                        <h4>
                          <span>BOA CASH REWARDS</span>
                          <span>$ 70</span>
                        </h4>
                        <h6>
                          <span class="nickname">Bank of America</span>
                        </h6>
                      </li>
                      <li>
                        <a href="#" class="add-another-ba"
                          >+ Link another bank account</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li class="card-balance">
                    <div class="balance-header">
                      <h3>
                        <div>
                          <span><i class="far fa-credit-card"></i></span>
                          <span>Credit Cards</span>
                        </div>
                        <span class="balance-amount">$ 0</span>
                      </h3>
                    </div>
                    <ul class="bank-list">
                      <li>
                        <a href="#" class="add-another-ba"
                          >+ Link another bank account</a
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
                <ul class="balance-total">
                  <li class="assets-total">
                    <span>ASSETS</span>
                    <span>$ 540</span>
                  </li>
                  <li class="debit-total">
                    <span>DEBITS</span>
                    <span>$ 0</span>
                  </li>
                  <li class="net-worth">
                    <span>NET WORTH</span>
                    <span>$ 540</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md-8">
            <div class="budget-card-view">
              <header class="card-header transparent">Warnings</header>
              <div class="card-content" id="warnings">
                  <ul>
                      <li class="card-warnings">
                        <div class="warnings-header">
                          <h3>
                            <div>
                            <a href="" class="warningLink" data-toggle="modal" data-target="#hintModal" >
                              <span class="icon">
                                  <i class="fas fa-exclamation-triangle red"></i>
                              </span>
                              <span>Budget exceed for now: $200</span>
                            </a>
                            </div>
                            <span>
                                <a href="#" class="btn"><i class="fas fa-times-circle"></i></a>
                            </span>
                          </h3>
                        </div>
                      </li>
                    </ul>
              </div>
            </div>
            <div class="budget-card-view">
                <header class="card-header transparent">Recent Purchases</header>
                <div class="card-content" id="purchases">
                    <button
                    type="button"
                    class="btn btn-primary btn-lg purchases-btn"
                    data-toggle="modal"
                    data-target="#addModal"
                  >
                    Add Purchase
                  </button>
                    <div class="purchases-date"><span id="now-date">Monday, Feb 11</span></div>
                    <ul class="purchase-each">
                        <li class="card-purchases">
                          <div class="purchases-header">
                            <h3>
                              <div class="purchase-content">
                                <span class="icon">
                                    <i class="fas fa-shopping-cart"></i>
                                </span>
                                <div class="purchase-title">
                                    <span>Get-together</span>
                                    <span>$ 20</span>
                                </div>
                              </div>
                              <span>
                                  <a href="#" class="btn" data-toggle="modal"
                                  data-target="#editModal"><i class="far fa-edit"></i></a>
                              </span>
                            </h3>
                          </div>
                        </li>
                        <li class="card-purchases">
                            <div class="purchases-header">
                              <h3>
                                <div class="purchase-content">
                                  <span class="icon">
                                      <i class="fas fa-shopping-cart"></i>
                                  </span>
                                  <div class="purchase-title">
                                      <span>Going out</span>
                                      <span>$ 100</span>
                                  </div>
                                </div>
                                <span>
                                    <a href="#" class="btn" data-toggle="modal"
                                    data-target="#editModal"><i class="far fa-edit"></i></a>
                                </span>
                              </h3>
                            </div>
                          </li>
                      </ul>
                </div>
              </div>
          </div>
        </div>
      </div>

      <!-- addModal -->
      <div class="modal modal-wrap" tabindex="-1" role="dialog" id="addModal">
        <div class="modal-dialog bugdet-modal border-0" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Add Purchase</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" height>
              <form id="add-form" method="post" action="">
              <div class="form-group row">
                <div class="col-sm-3">Type of Purchase</div>
                <div class="col-sm-9">
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox1"
                      name="purchaseType"
                      value="Food"
                    />
                    <label class="form-check-label" for="inlineCheckbox1"
                      >Food</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox2"
                      name="purchaseType"
                      value="Rent"
                    />
                    <label class="form-check-label" for="inlineCheckbox2"
                      >Rent</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox3"
                      name="purchaseType"
                      value="Activity Cost"
                    />
                    <label class="form-check-label" for="inlineCheckbox3"
                      >Activity Cost</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox4"
                      name="purchaseType"
                      value="Going Out"
                    />
                    <label class="form-check-label" for="inlineCheckbox4"
                      >Going Out</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox5"
                      name="purchaseType"
                      value="Entertainment"
                    />
                    <label class="form-check-label" for="inlineCheckbox5"
                      >Entertainment</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <div class="dropdown show ">
                      <a
                        id="more"
                        class="btn dropdown-toggle"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        ...
                      </a>
                      <div class="dropdown-menu" aria-labelledby="more">
                        <a class="dropdown-item" href="#">Tuition</a>
                        <a class="dropdown-item" href="#"
                          >Customize your tag</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row">
                  <div class="col-sm-3">Memo</div>
                  <div class="col-sm-9">
                    <input
                      type="text"
                      class="form-control buget-radius"
                      id="memo"
                      name="memo"
                      placeholder="Say something!"
                      value=""
                      required
                    />
                  </div>
                </div>
              <div class="form-group row">
                <div class="col-sm-3">Cost</div>
                <div class="col-sm-9">
                  <input
                    type="text"
                    class="form-control buget-radius"
                    id="cost"
                    name="cost"
                    placeholder="$$$"
                    value=""
                    required
                  />
                </div>
              </div>
              <div class="form-group row">
                <div class="col-sm-3">Date</div>
                <div class="col-sm-9">
                  <input
                    type="date"
                    class="form-control buget-radius"
                    id="date"
                    name="date"
                    value=""
                    min="2019-01-01"
                    max="2019-12-31"
                  />
                </div>
              </div>
              <div class="form-group">
                  <div class="modal-footer bugdet-modal-footer footer-for-purchase">
                      <button
                        type="button"
                        class="btn btn-secondary budget-radius transparent"
                        data-dismiss="modal"
                      >
                        Close
                      </button>
                      <button
                    type="submit"
                    class="btn btn-primary budget-radius primary-color border-0"
                  >
                    Submit purchase
                  </button>
                    </div>
              </div>
              
            </form>
            </div>
            
          </div>
        </div>
      </div>
      <!-- End of addModal-->
      <!-- editModal -->
      <div class="modal modal-wrap" tabindex="-1" role="dialog" id="editModal">
          <div class="modal-dialog bugdet-modal border-0" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Edit Your Purchase</h5>
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" height>
                <div class="form-group row">
                  <div class="col-sm-3">Type of Purchase</div>
                  <div class="col-sm-9">
                      <div class="form-check form-check-inline">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            id="inlineCheckbox1"
                            value="option1"
                            checked
                          />
                          <label class="form-check-label" for="inlineCheckbox1"
                            >Get-together</label
                          >
                        </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="inlineCheckbox1"
                        value="option1"
                      />
                      <label class="form-check-label" for="inlineCheckbox1"
                        >Food</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="inlineCheckbox2"
                        value="option2"
                      />
                      <label class="form-check-label" for="inlineCheckbox2"
                        >Rent</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="inlineCheckbox3"
                        value="option3"
                      />
                      <label class="form-check-label" for="inlineCheckbox3"
                        >Activity Cost</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="inlineCheckbox1"
                        value="option1"
                      />
                      <label class="form-check-label" for="inlineCheckbox4"
                        >Going Out</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="inlineCheckbox2"
                        value="option2"
                      />
                      <label class="form-check-label" for="inlineCheckbox5"
                        >Entertainment</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <div class="dropdown show ">
                        <a
                          id="more"
                          class="btn dropdown-toggle"
                          data-toggle="dropdown"
                          aria-haspopup="true"
                          aria-expanded="false"
                        >
                          ...
                        </a>
                        <div class="dropdown-menu" aria-labelledby="more">
                          <a class="dropdown-item" href="#">Tuition</a>
                          <a class="dropdown-item" href="#"
                            >Customize your tag</a
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-3">Memo</div>
                    <div class="col-sm-9">
                      <input
                        type="text"
                        class="form-control buget-radius"
                        id="validationCustom01"
                        placeholder="Say something!"
                        value=""
                        required
                      />
                    </div>
                  </div>
                <div class="form-group row">
                  <div class="col-sm-3">Cost</div>
                  <div class="col-sm-9">
                    <input
                      type="text"
                      class="form-control buget-radius"
                      id="validationCustom01"
                      placeholder="$$$"
                      value="$20"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">Date</div>
                  <div class="col-sm-9">
                    <input
                      type="date"
                      class="form-control buget-radius"
                      id="validationCustom02"
                      name="trip-start"
                      value="2019-02-11"
                      min="2019-01-01"
                      max="2019-12-31"
                    />
                  </div>
                </div>
              </div>
              <div class="modal-footer bugdet-modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary budget-radius transparent"
                  data-dismiss="modal"
                >
                  Close
                </button>
                <button
                  type="button"
                  class="btn btn-primary budget-radius primary-color border-0"
                >
                  Edited
                </button>
              </div>
            </div>
          </div>
        </div>
      <!-- End of editModal-->
      <!-- hintModal -->
      <div class="modal modal-wrap" tabindex="-1" role="dialog" id="hintModal">
        <div class="modal-dialog bugdet-modal border-0" role="document">
          <div class="modal-content">
            <!-- <div class="modal-header">
              <h5 class="modal-title">Add Purchase</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div> -->
            <div class="modal-body" height>
              <div class="container">
                <div class="jumbotron transparent">
                  <h1 class="display-5 text-center">
                    <i class="fas fa-exclamation-triangle red"></i> Recommend
                    Daily Spend: $7
                  </h1>

                  <hr class="my-5" />
                  <div class="container-fluid">
                    <a class="btn btn-default" href="#" role="button">
                      <div>
                        <h2 class="text-right">$1500</h2>
                        <h4 class="text-right">balance</h4>
                      </div>
                    </a>
                    <div class="balance_budget">
                      <a
                        class="btn btn-default balance_budget"
                        href="#"
                        role="button"
                      >
                        <div>
                          <h2>$50</h2>
                          <h4>budget left</h4>
                        </div>
                      </a>
                    </div>

                    <hr class="my-4" />
                    <p class="lead"></p>
                    <p class="lead">Time left in this period: 7 Days</p>
                    <hr class="my-4" />
                    <p class="lead">Budget left in this period: $50</p>
                    <hr class="my-4" />
                    <p class="lead">Budget exceed for now: $200</p>
                    <hr class="my-4" />

                    <button
                      type="button"
                      class="btn btn-warning btn-lg btn-block"
                      data-container="body"
                      data-toggle="popover"
                      data-trigger="focus"
                      data-placement="top"
                      title="Hint for you"
                      data-content="Don't speed money except keeping youself alive!!!"
                    >
                      Get a hint!
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer bugdet-modal-footer">
              <button
                type="button"
                class="btn btn-secondary budget-radius transparent"
                data-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- End of hintModal-->
    </div>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
    <script>
      var socket = io.connect('http://' + document.domain + ':' + location.port);
      socket.on( 'connect', function() {
      socket.emit( 'my event', {
        data: 'User Connected'
      })
      var form = $( "#add-form" ).on( 'submit', function( e ) {
        e.preventDefault()
        var list = $("input[name='purchaseType']:checked").map(function () {
            return this.value;
        }).get();
        let cate = list
        let memo = $( '#memo' ).val()
        let cost = $( '#cost' ).val()
        socket.emit( 'my event', {
          cate: cate,
          memo : memo,
          cost : cost
        })
      })
    })
    socket.on( 'my response', function( msg ) {
        console.log( msg )
        if( typeof msg.memo !== 'undefined' ) {
          $( 'ul.purchase-each' ).append( '<li class="card-purchases"><div class="purchases-header"><h3><div class="purchase-content"><span class="icon"><i class="fas fa-shopping-cart"></i></span><div class="purchase-title"><span>'+msg.cate.toString()+'</span><span> $ '+msg.cost+'</span></div></div><span><a href="#" class="btn" data-toggle="modal" data-target="#editModal"><i class="far fa-edit"></i></a></span></h3></div></li>' )
        }
      })
      $(document).ready(function() {
        $(function() {
          $('[data-toggle="popover"]').popover();
        });
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1; //January is 0!
        var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        var mS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];
        var d = today.getDay();
        var yyyy = today.getFullYear();

        if(dd<10) {
            dd = '0'+dd
        } 
        
        today = days[d]+ ', ' +mS[mm-1] + ' ' + dd + ' ' + yyyy;
        
        $( '#now-date' ).text(today);

        if(mm<10) {
            mm = '0'+mm
        } 
        var date_val = yyyy + '-' + mm + '-' + dd;
        console.log(date_val)
        $( '#date' ).val(date_val);
      });
    </script>
  </body>
</html>
